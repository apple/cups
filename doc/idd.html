<HTML>
<HEAD>
<TITLE>DRAFT - CUPS Interface Design Description</TITLE>
<META NAME="AUTHOR" CONTENT="Easy Software Products">
<META NAME="COPYRIGHT" CONTENT="Copyright 1997-1999, All Rights Reserved">
<META NAME="DOCNUMBER" CONTENT="CUPS-IDD-1.0">
</HEAD>
<BODY>
<CENTER><A HREF=#contents><IMG SRC="images/cups-large.gif" BORDER=0><BR>
<H1>DRAFT - CUPS Interface Design Description</H1></A><BR>
CUPS-IDD-1.0<BR>
Easy Software Products<BR>
Copyright 1997-1999, All Rights Reserved<BR>
</CENTER>
<HR>
<H1 ALIGN=CENTER><A NAME=CONTENTS>Table of Contents</A></H1>
<BR>
<BR><B><A HREF=#1>1 Scope</A></B>
<UL>
<LI><A HREF=#1_1>1.1 Identification</A></LI>
<LI><A HREF=#1_2>1.2 System Overview</A></LI>
<LI><A HREF=#1_3>1.3 Document Overview</A></LI>
</UL>
<B><A HREF=#2>2 References</A></B>
<UL>
<LI><A HREF=#2_1>2.1 CUPS Documentation</A></LI>
<LI><A HREF=#2_2>2.2 Other Documents</A></LI>
</UL>
<B><A HREF=#3>3 Internal Interfaces</A></B>
<UL>
<LI><A HREF=#3_1>3.1 Character Set Files</A></LI>
<LI><A HREF=#3_2>3.2 Language Files</A></LI>
<LI><A HREF=#3_3>3.3 MIME Files</A></LI>
<UL>
<LI><A HREF=#3_3_1>3.3.1 mime.types</A></LI>
<LI><A HREF=#3_3_2>3.3.2 mime.convs</A></LI>
</UL>
<LI><A HREF=#3_4>3.4 PPD Files</A></LI>
<LI><A HREF=#3_5>3.5 Scheduler Configuration Files</A></LI>
<UL>
<LI><A HREF=#3_5_1>3.5.1 cupsd.conf</A></LI>
<LI><A HREF=#3_5_2>3.5.2 printers.conf</A></LI>
<LI><A HREF=#3_5_3>3.5.3 classes.conf</A></LI>
</UL>
</UL>
<B><A HREF=#4>4 External Interfaces</A></B>
<UL>
<LI><A HREF=#4_1>4.1 Application Socket Protocol</A></LI>
<LI><A HREF=#4_2>4.2 CUPS Browsing Protocol</A></LI>
<LI><A HREF=#4_3>4.3 CUPS PostScript File</A></LI>
<LI><A HREF=#4_4>4.4 CUPS Raster File</A></LI>
<LI><A HREF=#4_5>4.5 Internet Printing Protocol</A></LI>
<LI><A HREF=#4_6>4.6 Line Printer Daemon Protocol</A></LI>
<LI><A HREF=#4_7>4.7 Parallel Device</A></LI>
<LI><A HREF=#4_8>4.8 Serial Device</A></LI>
<LI><A HREF=#4_9>4.9 Server Message Block Protocol</A></LI>
<LI><A HREF=#4_10>4.10 Trivial File Transfer Protocol</A></LI>
</UL>
<B><A HREF=#5>5 Command-Line Interfaces</A></B>
<UL>
<LI><A HREF=#5_1>5.1 Backend Interfaces</A></LI>
<LI><A HREF=#5_2>5.2 Filter Interfaces</A></LI>
</UL>
<B><A HREF=#6>A Glossary</A></B>
<UL>
<LI><A HREF=#6_1>A.1 Terms</A></LI>
<LI><A HREF=#6_2>A.2 Acronyms</A></LI>
</UL>
<HR>
<H1><A NAME=1>1 Scope</A></H1>
<H2><A NAME=1_1>1.1 Identification</A></H2>
 This interface design description document provides detailed file 
formats, message formats, and program conventions for the Common UNIX 
Printing System (&quot;CUPS&quot;) Version 1.0. 
<H2><A NAME=1_2>1.2 System Overview</A></H2>
 The Common UNIX Printing System provides a portable printing layer for 
 UNIX&reg; operating systems. It has been developed by Easy Software 
 Products to promote a standard printing solution for all UNIX vendors 
 and users. CUPS provides the System V and Berkeley command-line 
interfaces. 
<P>CUPS uses the Internet Printing Protocol (IETF-IPP) as the basis for 
managing print jobs and queues. The Line Printer Daemon (LPD, RFC1179), 
Server Message Block (SMB), and AppSocket protocols are also supported 
with reduced functionality. </P>
<P>CUPS adds network printer browsing and PostScript Printer 
Description (&quot;PPD&quot;)-based printing options to support real world 
applications under UNIX. </P>
<H2><A NAME=1_3>1.3 Document Overview</A></H2>
 This interface design description document is organized into the 
following sections: 
<UL>
<LI>1 - Scope </LI>
<LI>2 - References </LI>
<LI>3 - Internal Interfaces </LI>
<LI>4 - External Interfaces </LI>
<LI>5 - Command-Line Interfaces </LI>
<LI>A - Glossary </LI>
</UL>
<H1><A NAME=2>2 References</A></H1>
<H2><A NAME=2_1>2.1 CUPS Documentation</A></H2>
 The following CUPS documentation is referenced by this document: 
<UL>
<LI>CUPS-CMP-1.0: CUPS Configuration Management Plan </LI>
<LI>CUPS-IDD-1.0: CUPS System Interface Design Description </LI>
<LI>CUPS-SAM-1.0.x: CUPS Software Administrators Manual </LI>
<LI>CUPS-SDD-1.0: CUPS Software Design Description </LI>
<LI>CUPS-SPM-1.0: CUPS Software Programming Manual </LI>
<LI>CUPS-SSR-1.0: CUPS Software Security Report </LI>
<LI>CUPS-STP-1.0: CUPS Software Test Plan </LI>
<LI>CUPS-SUM-1.0.x: CUPS Software Users Manual </LI>
<LI>CUPS-SVD-1.0.x: CUPS Software Version Description </LI>
</UL>
<H2><A NAME=2_2>2.2 Other Documents</A></H2>
 The following non-CUPS documents are referenced by this document: 
<UL>
<LI>IEEE 1387.4, System Administration: Printing (draft) </LI>
<LI>IPP/1.0: Additional Optional Operations - Set 1 </LI>
<LI>IPP/1.0: Encoding and Transport </LI>
<LI>IPP/1.0: Implementers Guide </LI>
<LI>IPP/1.0: Model and Semantics </LI>
<LI>RFC 1179, Line Printer Daemon Protocol </LI>
</UL>
<H1><A NAME=3>3 Internal Interfaces</A></H1>
<H2><A NAME=3_1>3.1 Character Set Files</A></H2>
<H2><A NAME=3_2>3.2 Language Files</A></H2>
<H2><A NAME=3_3>3.3 MIME Files</A></H2>
<H3><A NAME=3_3_1>3.3.1 mime.types</A></H3>
<H3><A NAME=3_3_2>3.3.2 mime.convs</A></H3>
<H2><A NAME=3_4>3.4 PPD Files</A></H2>
<H2><A NAME=3_5>3.5 Scheduler Configuration Files</A></H2>
<H3><A NAME=3_5_1>3.5.1 cupsd.conf</A></H3>
<H3><A NAME=3_5_2>3.5.2 printers.conf</A></H3>
<H3><A NAME=3_5_3>3.5.3 classes.conf</A></H3>
<H1><A NAME=4>4 External Interfaces</A></H1>
<H2><A NAME=4_1>4.1 Application Socket Protocol</A></H2>
<H2><A NAME=4_2>4.2 CUPS Browsing Protocol</A></H2>
<H2><A NAME=4_3>4.3 CUPS PostScript File</A></H2>
 CUPS PostScript files are device-dependent Adobe PostScript program 
files. The PostScript language is described in the PostScript Language 
Reference Manual, Third Edition. 
<H2><A NAME=4_4>4.4 CUPS Raster File</A></H2>
 CUPS raster files are device-dependent raster image files that contain 
a PostScript page device dictionary and device-dependent raster imagery 
for each page in the document.  These files are used to transfer raster 
data from the PostScript and image file RIPs to device-dependent 
filters that convert the raster data to a printable format. 
<P>A raster file begins with a four byte synchronization word: 
0x52615374 (&quot;RaSt&quot;) for big-endian architectures and 0x74536152 
(&quot;tSaR&quot;) for little-endian architectures.  The writer of the raster 
file will use the native word order, and the reader is responsible for 
detecting a reversed word order file and swapping bytes as needed. The 
CUPS Interface Library raster functions perform this function 
automatically. </P>
<P>Following the synchronization word are a series of raster pages. 
 Each page starts with a page device dictionary header and is followed 
immediately by the raster data for that page. 
<CENTER>
<TABLE BORDER=1 WIDTH=80%>
<TR><TH>Bytes</TH><TH>Description</TH><TH>Values</TH></TR>
<TR><TD>0-63</TD><TD>MediaClass</TD><TD>Nul-terminated ASCII string</TD></TR>
<TR><TD>64-127</TD><TD>MediaColor</TD><TD>Nul-terminated ASCII string</TD>
</TR>
<TR><TD>128-191</TD><TD>MediaType</TD><TD>Nul-terminated ASCII string</TD>
</TR>
<TR><TD>192-255</TD><TD>OutputType</TD><TD>Nul-terminated ASCII string</TD>
</TR>
<TR><TD>256-259</TD><TD>AdvanceDistance</TD><TD>0 to 2<SUP>32</SUP> - 1 
pixels</TD></TR>
<TR><TD>260-263</TD><TD>AdvanceMedia</TD><TD>0 = Never advance roll
<BR> 1 = Advance roll after file
<BR> 2 = Advance roll after job
<BR> 3 = Advance roll after set
<BR> 4 = Advance roll after page</TD></TR>
<TR><TD>264-267</TD><TD>Collate</TD><TD>0 = do not collate copies
<BR> 1 = collate copies</TD></TR>
<TR><TD>268-271</TD><TD>CutMedia</TD><TD>0 = Never cut media
<BR> 1 = Cut roll after file
<BR> 2 = Cut roll after job
<BR> 3 = Cut roll after set
<BR> 4 = Cut roll after page</TD></TR>
<TR><TD>272-275</TD><TD>Duplex</TD><TD>0 = Print single-sided
<BR> 1 = Print double-sided</TD></TR>
<TR><TD>276-283</TD><TD>HWResolution</TD><TD>Horizontal and vertical 
resolution in dots-per-inch.</TD></TR>
<TR><TD>284-299</TD><TD>ImagingBoundingBox</TD><TD>Four integers giving 
the left, bottom, right, and top positions  of the page bounding box in 
pixels</TD></TR>
<TR><TD>300-303</TD><TD>InsertSheet</TD><TD>0 = Do not insert separator 
sheets
<BR> 1 = Insert separator sheets</TD></TR>
<TR><TD>304-307</TD><TD>Jog</TD><TD>0 = Do no jog pages
<BR> 1 = Jog pages after file
<BR> 2 = Jog pages after job
<BR> 3 = Jog pages after set</TD></TR>
<TR><TD>308-311</TD><TD>LeadingEdge</TD><TD>0 = Top edge is first
<BR> 1 = Right edge is first
<BR> 2 = Bottom edge is first
<BR> 3 = Left edge is first</TD></TR>
<TR><TD>312-319</TD><TD>Margins</TD><TD>Left and bottom origin of image 
in pixels</TD></TR>
<TR><TD>320-323</TD><TD>ManualFeed</TD><TD>0 = Do not manually feed 
media
<BR> 1 = Manually feed media</TD></TR>
<TR><TD>324-327</TD><TD>MediaPosition</TD><TD>Input slot position from 
0 to N</TD></TR>
<TR><TD>328-331</TD><TD>MediaWeight</TD><TD>Media weight in grams per 
meter squared</TD></TR>
<TR><TD>332-335</TD><TD>MirrorPrint</TD><TD>0 = Do not mirror prints
<BR> 1 = Mirror prints</TD></TR>
<TR><TD>336-339</TD><TD>NegativePrint</TD><TD></TR>
<TR><TD><TD><TD></TR>
<TR><TD><TD><TD></TR>
<TR><TD><TD><TD></TR>
<TR><TD><TD><TD></TR>
<TR><TD><TD><TD></TR>
</TABLE>
</CENTER>
</P>
<H2><A NAME=4_5>4.5 Internet Printing Protocol</A></H2>
<H2><A NAME=4_6>4.6 Line Printer Daemon Protocol</A></H2>
<H2><A NAME=4_7>4.7 Parallel Device</A></H2>
<H2><A NAME=4_8>4.8 Serial Device</A></H2>
<H2><A NAME=4_9>4.9 Server Message Block Protocol</A></H2>
<H2><A NAME=4_10>4.10 Trivial File Transfer Protocol</A></H2>
<H1><A NAME=5>5 Command-Line Interfaces</A></H1>
<H2><A NAME=5_1>5.1 Backend Interfaces</A></H2>
<H2><A NAME=5_2>5.2 Filter Interfaces</A></H2>
<H1 TYPE=A VALUE=1><A NAME=6>A Glossary</A></H1>
<H2><A NAME=6_1>A.1 Terms</A></H2>
<DL>
<DT>C </DT>
<DD>A computer language. </DD>
<DT>parallel </DT>
<DD>Sending or receiving data more than 1 bit at a time. </DD>
<DT>pipe </DT>
<DD>A one-way communications channel between two programs. </DD>
<DT>serial </DT>
<DD>Sending or receiving data 1 bit at a time. </DD>
<DT>socket </DT>
<DD>A two-way network communications channel. </DD>
</DL>
<H2><A NAME=6_2>A.2 Acronyms</A></H2>
<DL>
<DT>ASCII </DT>
<DD>American Standard Code for Information Interchange </DD>
<DT>CUPS </DT>
<DD>Common UNIX Printing System </DD>
<DT>ESC/P </DT>
<DD>EPSON Standard Code for Printers </DD>
<DT>FTP </DT>
<DD>File Transfer Protocol </DD>
<DT>HP-GL </DT>
<DD>Hewlett-Packard Graphics Language </DD>
<DT>HP-PCL </DT>
<DD>Hewlett-Packard Printer Control Language </DD>
<DT>HP-PJL </DT>
<DD>Hewlett-Packard Printer Job Language </DD>
<DT>IETF </DT>
<DD>Internet Engineering Task Force </DD>
<DT>IPP </DT>
<DD>Internet Printing Protocol </DD>
<DT>ISO </DT>
<DD>International Standards Organization </DD>
<DT>LPD </DT>
<DD>Line Printer Daemon </DD>
<DT>MIME </DT>
<DD>Multimedia Internet Mail Exchange </DD>
<DT>PCL </DT>
<DD>Page Control Language </DD>
<DT>PPD </DT>
<DD>PostScript Printer Description </DD>
<DT>SMB </DT>
<DD>Server Message Block </DD>
<DT>TFTP </DT>
<DD>Trivial File Transfer Protocol </DD>
</DL>
</BODY>
</HTML>
